# i18n Rules - MirrorBuddy

## ALL UI text internationalized. 5 locales from day 1.

**Locales**: `it` (default) | `en` | `fr` | `de` | `es`
**Framework**: next-intl (App Router, server-first)
**Messages**: `messages/{locale}/{namespace}.json` (ADR 0082)
**Namespaces**: common, auth, admin, chat, tools, settings, compliance, education, navigation, errors, welcome, metadata

## CRITICAL: Wrapper Key Convention (ADR 0104)

ALL JSON files MUST wrap content under a single key matching the filename: `{ "namespace": { ...content... } }`.
Missing wrapper keys caused 98 ESLint warnings + 37 E2E failures (namespace collisions via `Object.assign()`).

## Enforcement

| Rule                     | How                                         |
| ------------------------ | ------------------------------------------- |
| No hardcoded text in JSX | ESLint `no-hardcoded-italian`               |
| camelCase keys only      | ESLint `no-kebab-case-i18n-keys` (ADR 0091) |
| All 5 languages synced   | Pre-commit `npm run i18n:check`             |

## Hooks

| When                | Use                       |
| ------------------- | ------------------------- |
| Client component    | `useTranslations('ns')`   |
| Server component    | `getTranslations('ns')`   |
| Multiple namespaces | `useTranslationsGlobal()` |
| Current locale      | `useLocaleContext()`      |

## Adding keys: Italian first → `npx tsx scripts/i18n-sync-namespaces.ts --add-missing` → verify `npm run i18n:check`

## Formal address (ADR 0064): Pre-1900 figures use Lei/Sie/Vous. Set in `FORMAL_PROFESSORS` (`src/lib/greeting/templates/index.ts`).

## Full docs: `docs/i18n/` | ADR 0064, 0066, 0082, 0091, 0104
